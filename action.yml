name: Install komac
description: Install the komac CLI (latest, specific version, or nightly) on Windows, Linux, or macOS.
author: UnownPlain

inputs:
  version:
    description: Specific komac version 2.3.0+ (e.g. 2.13.0 or nightly).
    required: false
  repo:
    description: Custom repository to download komac from (e.g. russellbanks/Komac).
    required: false
    default: russellbanks/Komac
  compression:
    description: Compression format for the tarball (gz or zst).
    required: false
    default: gz
  linux_libc:
    description: Linux libc variant (gnu or musl).
    required: false
    default: gnu
  github_token:
    description: GitHub token for API rate limit (defaults to GITHUB_TOKEN).
    required: false

runs:
  using: composite
  steps:
    - name: Install komac
      shell: bash
      env:
        VERSION: ${{ inputs.version }}
        REPO: ${{ inputs.repo }}
        COMPRESSION: ${{ inputs.compression }}
        LINUX_LIBC: ${{ inputs.linux_libc }}
        GH_TOKEN: ${{ inputs.github_token || github.token }}
      run: bash "${GITHUB_ACTION_PATH}/install_komac.sh"

branding:
  icon: download
  color: blue
